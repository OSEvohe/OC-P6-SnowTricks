{% extends 'base.html.twig' %}

{% block title %}{{ trick.name }} - {{ parent() }}{% endblock %}

{% block body %}
    <div class="trick-body">
        <div class="container p-0 my-0">
            <section class="trick-name row">
                <div class="col-12">
                    <div class="trick-image">
                        <img src="{{ asset("uploads/tricks/"~trick.cover.content) }}" alt="figure1">
                        <div class="trick-action-button">
                            <i class="fas fa-pen"></i>&nbsp;
                            <i class="fas fa-trash"></i>
                        </div>
                    </div>
                    <h1>{{ trick.name }}</h1>
                </div>
            </section>
        </div>
        <div class="container pt-5">
            <div id="show-media-button" class="col-12 text-center d-block d-lg-none pb-5">
                <button class="btn btn-primary" type="button" data-toggle="collapse"
                        data-target="#media-list" aria-expanded="false" aria-controls="mediaList">
                    Voir les médias
                </button>
            </div>
            <section class="collapse" id="media-list">
                <div class="trick-media-list row d-flex justify-content-center pb-5">
                    {% for trickMedia in trick.trickMedia%}
                        <div class="trick-media-item col-md-2 pb-sm-3 pb-md-0">
                            {% if trickMedia.type == 1 %}
                            <img class="trick-media-cover" src="{{ asset("uploads/tricks/"~trickMedia.content) }}" alt=""/>
                            {% elseif trickMedia.type == 2 %}
                                <iframe height="100%" src="https://www.youtube.com/embed/{{ youtube.getId(trickMedia.content) }}" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
                                {% endif %}
                        </div>
                    {% endfor %}
                </div>
            </section>
            <section class="trick-description row justify-content-center pb-5">
                <div class="col-sm-12 col-md-10">
                    <h2 class="text-center mb-3">Description</h2>
                    <p>{{ trick.description }}</p>
                </div>
            </section>
            <section class="row trick-meta d-flex justify-content-center pb-3">
                <div class="col-sm-12 col-lg-9">
                    <ul class="list-unstyled list-inline text-center">
                        <li class="list-inline-item trick-date-created"><i class="fas fa-calendar"></i> 02/10/2020 11:30
                        </li>
                        <li class="list-inline-item trick-group"><i class="fas fa-layer-group"></i> Groupe 1</li>
                        <li class="list-inline-item trick-date-modified"><i class="fas fa-edit"></i> 03/10/2020 15:34
                        </li>
                    </ul>
                </div>
            </section>
            <hr/>
            {% if is_granted('ROLE_USER') %}
                <section class="row justify-content-center pb-5">
                    <div class="col-sm-12 col-md-6">
                        {{ form_start(commentForm) }}
                        <div class="form-group">
                            {{ form_widget(commentForm.content) }}
                        </div>
                        <div class="form-group text-center">
                            <button class="btn btn-lg btn-primary" type="submit">
                                Laisser un commentaire
                            </button>
                        </div>
                        {{ form_end(commentForm) }}
                    </div>
                </section>
            {% endif %}
            <hr/>
            <section class="row justify-content-center pb-5 comments-list">
                <div class="col-sm-12 col-md-9 col-lg-6">
                    <h2 class="text-center mb-4">Commentaires</h2>
                    {% for i in 1..5 %}
                        <div class="comment-item row">
                            <div class="user-photo d-inline-block p-2 col-2">
                                <div>
                                    <img src="{{ asset("build/images/user-icon-image-18.jpg") }}" alt=""/>
                                </div>
                            </div>
                            <div class="comment d-inline-block p-2 col-10">
                                <div class="comment-meta">
                                    Message de user42 le 17/11/2020 à 13h37
                                </div>
                                <div class="comment-content">
                                    Super mais sans les mains c'est encore mieux. Super mais sans les mains c'est encore
                                    mieux. Super mais sans les mains c'est encore mieux. Super mais sans les mains c'est
                                    encore mieux. Super mais sans les mains c'est encore mieux.
                                </div>
                            </div>
                        </div>
                    {% endfor %}
                </div>
            </section>
            <div class="row">
                <div class="col-12 text-center pb-5">
                    <button id="loadmorecomment" class="btn-primary">Voir plus...</button>
                </div>
            </div>

        </div>
    </div>
{% endblock %}